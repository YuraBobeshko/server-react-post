{"version":3,"sources":["../src/post.js"],"names":["isDate","val","Object","prototype","toString","call","isObj","stringifyValue","JSON","stringify","buildForm","action","target","params","form","document","createElement","setAttribute","keys","forEach","input","key","appendChild","post","details","body","submit","remove"],"mappings":";;;;;;;;;;AAAA,SAASA,MAAT,CAAgBC,GAAhB,EAAqB;AACnB;AACA,SAAOC,OAAOC,SAAP,CAAiBC,QAAjB,CAA0BC,IAA1B,CAA+BJ,GAA/B,MAAwC,eAA/C;AACD;;AAED,SAASK,KAAT,CAAeL,GAAf,EAAoB;AAClB,SAAO,QAAOA,GAAP,MAAe,QAAtB;AACD;;AAEM,SAASM,cAAT,CAAwBN,GAAxB,EAA6B;AAClC,MAAIK,MAAML,GAAN,KAAc,CAACD,MAAnB,EAA2B;AACzB,WAAOQ,KAAKC,SAAL,CAAeR,GAAf,CAAP;AACD,GAFD,MAEO;AACL,WAAOA,GAAP;AACD;AACF;;AAED,SAASS,SAAT,OAA+C;AAAA,MAA1BC,MAA0B,QAA1BA,MAA0B;AAAA,MAAlBC,MAAkB,QAAlBA,MAAkB;AAAA,MAAVC,MAAU,QAAVA,MAAU;AAC7C,MAAMC,OAAOC,SAASC,aAAT,CAAuB,MAAvB,CAAb;AACAF,OAAKG,YAAL,CAAkB,QAAlB,EAA4B,MAA5B;AACAH,OAAKG,YAAL,CAAkB,QAAlB,EAA4BN,MAA5B;AACAG,OAAKG,YAAL,CAAkB,QAAlB,EAA4BL,MAA5B;AAEAV,SAAOgB,IAAP,CAAYL,MAAZ,EAAoBM,OAApB,CAA4B,eAAO;AACjC,QAAMC,QAAQL,SAASC,aAAT,CAAuB,OAAvB,CAAd;AACAI,UAAMH,YAAN,CAAmB,MAAnB,EAA2B,QAA3B;AACAG,UAAMH,YAAN,CAAmB,MAAnB,EAA2BI,GAA3B;AACAD,UAAMH,YAAN,CAAmB,OAAnB,EAA4BV,eAAeM,OAAOQ,GAAP,CAAf,CAA5B;AACAP,SAAKQ,WAAL,CAAiBF,KAAjB;AACD,GAND;AAQA,SAAON,IAAP;AACD;;AAEc,SAASS,IAAT,CAAcC,OAAd,EAAuB;AACpC,MAAMV,OAAO,KAAKJ,SAAL,CAAec,OAAf,CAAb;AACAT,WAASU,IAAT,CAAcH,WAAd,CAA0BR,IAA1B;AACAA,OAAKY,MAAL;AACAZ,OAAKa,MAAL;AACD","file":"post.js","sourcesContent":["function isDate(val) {\n  // Cross realm comptatible\n  return Object.prototype.toString.call(val) === '[object Date]'\n}\n\nfunction isObj(val) {\n  return typeof val === 'object'\n}\n\nexport function stringifyValue(val) {\n  if (isObj(val) && !isDate) {\n    return JSON.stringify(val)\n  } else {\n    return val\n  }\n}\n\nfunction buildForm({ action, target, params }) {\n  const form = document.createElement('form')\n  form.setAttribute('method', 'post')\n  form.setAttribute('action', action)\n  form.setAttribute('target', target)\n\n  Object.keys(params).forEach(key => {\n    const input = document.createElement('input')\n    input.setAttribute('type', 'hidden')\n    input.setAttribute('name', key)\n    input.setAttribute('value', stringifyValue(params[key]))\n    form.appendChild(input)\n  })\n\n  return form\n}\n\nexport default function post(details) {\n  const form = this.buildForm(details)\n  document.body.appendChild(form)\n  form.submit()\n  form.remove()\n}"]}